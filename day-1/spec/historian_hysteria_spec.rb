require "rspec"
require_relative "../historian_hysteria.rb"

describe("#total_distance") do
  it "will return 0 if lists are the same" do
    list = [1, 2, 3, 4]
    expect = 0
    actual = total_distance(list, list)
    expect(actual).to eq(expect)
  end

  it "will calculate the correct total distance between sorted numbers in 2 small arrays" do
    a = [3, 4, 2, 1, 3, 3]
    b = [4, 3, 5, 3, 9, 3]
    expect = 11
    actual = total_distance(a, b)
    expect(actual).to eq(expect)
  end

  it "will calculate the correct total distance between sorted numbers in 2 large arrays" do
    a = [
      51487, 1285, 26346, 70862, 83381, 65322, 80806, 72117, 82471, 7101,
      96192, 6087, 17376, 34446, 77288, 17857, 5808, 33763, 24756, 80733,
      68712, 60678, 17179, 64311, 42976, 48351, 14610, 80973, 20568, 86847,
      60243, 4038, 39081, 47473, 24956, 86132, 60095, 35110, 60438, 80927,
      97824, 97835, 25349, 8748, 54914, 39530, 87485, 43787, 82842, 40974,
      59469, 65751, 77827, 66775, 68704, 49185, 56749, 91249, 41438, 42851,
      27563, 40497, 7868, 67935, 36642, 76578, 87009, 35194, 68751, 32086,
      91399, 76543, 39362, 70705, 91900, 48611, 20641, 9178, 57136, 61685,
      73165, 3239, 29803, 8968, 37842, 77473, 34925, 16090, 9910, 37132,
      94191, 66390, 86505, 86161, 40594, 56691, 97338, 85050, 88028, 6382
    ]
    b = [
      49866, 830, 3055, 83923, 68409, 45514, 6571, 9245, 34105, 53888,
      10266, 33640, 61456, 6657, 6681, 88349, 68323, 4120, 46272, 86190,
      22700, 28311, 40750, 18614, 62090, 24094, 7260, 29608, 41252, 29109,
      75352, 79162, 74489, 56490, 1124, 88317, 32275, 72355, 19185, 48110,
      79428, 61460, 45824, 22815, 57640, 11074, 9950, 81329, 49875, 42565,
      60385, 95548, 19827, 9712, 71879, 64894, 53157, 56041, 65267, 15719,
      10115, 10751, 69682, 1065, 19337, 27191, 15496, 45462, 81584, 14662,
      84272, 89533, 95323, 6432, 60126, 28321, 33773, 44653, 34665, 73562,
      50402, 99150, 18261, 24591, 79079, 32706, 72419, 82964, 70687, 95715,
      65877, 7059, 43727, 52483, 2474, 39107, 20795, 68341, 4665, 49399
    ]
    expect = 805956
    actual = total_distance(a, b)
    expect(actual).to eq(expect)
  end
end

describe("#similarity_score") do
  it "will return 0 if no matching numbers" do
    a = [3, 2, 4, 1]
    b = [6, 8, 5, 7]
    expect = 0
    actual = similarity_score(a, b)
    expect(actual).to eq(expect)
  end

  it "will calculate the correct similarity score for 2 small arrays" do
    a = [3, 4, 2, 1, 3, 3]
    b = [4, 3, 5, 3, 9, 3]
    expect = 31
    actual = similarity_score(a, b)
    expect(actual).to eq(expect)
  end

  it "will calculate the correct similarity score for 2 large arrays" do
    a = [
      5, 41, 38, 34, 12, 25, 19, 38, 2, 5, 30, 17, 10, 8, 31, 4, 50, 36, 43, 30,
      38, 17, 16, 26, 25, 23, 40, 3, 24, 50, 3, 18, 37, 27, 35, 9, 11, 14, 20, 18,
      27, 22, 27, 18, 8, 23, 41, 19, 17, 5, 11, 40, 47, 36, 29, 14, 43, 30, 43, 39,
      47, 15, 15, 26, 3, 29, 30, 42, 5, 28, 48, 8, 30, 18, 46, 22, 45, 49, 42, 11,
      37, 27, 40, 21, 19, 30, 47, 50, 8, 20, 6, 46, 29, 41, 1, 9, 12, 22, 7, 19
    ]
    b = [
      36, 12, 20, 32, 50, 7, 25, 32, 14, 12, 10, 23, 44, 26, 11, 15, 10, 19, 27, 24,
      36, 30, 22, 40, 10, 9, 15, 46, 4, 31, 38, 11, 7, 46, 2, 31, 31, 48, 7, 33, 42,
      25, 11, 24, 25, 34, 28, 48, 7, 19, 32, 17, 49, 16, 50, 2, 33, 1, 10, 42, 26,
      42, 29, 40, 33, 36, 9, 14, 4, 26, 7, 42, 15, 40, 13, 28, 12, 42, 39, 16, 24,
      7, 33, 45, 46, 17, 37, 25, 37, 17, 7, 38, 49, 21, 33, 30, 11, 19, 12, 20
    ]
    expect = 4530
    actual = similarity_score(a, b)
    expect(actual).to eq(expect)
  end
end
